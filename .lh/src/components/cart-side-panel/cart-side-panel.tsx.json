{
    "sourceFile": "src/components/cart-side-panel/cart-side-panel.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 4,
            "patches": [
                {
                    "date": 1717234889741,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1717234897677,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n import React, { useState } from \"react\";\n \n import useCartStore from \"../../store/cartStore\";\n import type { Discount } from \"../../utils/discount/discount.types\";\n-import calculateDiscount from \"../../utils/discountCalculator\";\n+import calculateDiscount from \"../../utils/discount/discountCalculator\";\n \n interface CartSidePanelProps {\n   discountCodes: { [code: string]: Discount };\n }\n"
                },
                {
                    "date": 1717335670005,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -116,9 +116,9 @@\n                 type=\"text\"\n                 value={discountCode}\n                 onChange={(e) => setDiscountCode(e.target.value)}\n                 placeholder=\"Enter discount code\"\n-                className=\"mb-4 mt-1 block w-full rounded-lg border-gray-300\"\n+                className=\"mb-4 mt-1 block w-full rounded-sm border-gray-300\"\n               />\n               <button\n                 onClick={handleApplyDiscountCode}\n                 className=\"rounded bg-primary px-4 py-2 font-bold text-white hover:bg-primary-dark\"\n"
                },
                {
                    "date": 1717335692449,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -108,17 +108,17 @@\n                 </button>\n               </div>\n             ))}\n             <div className=\"mt-6 rounded-lg border bg-background p-4 shadow-lg\">\n-              <h2 className=\"mb-4 font-heading text-2xl font-bold text-primary\">\n+              <h2 className=\"mb-4 font-heading text-sm font-bold text-primary\">\n                 Apply Discount Code\n               </h2>\n               <input\n                 type=\"text\"\n                 value={discountCode}\n                 onChange={(e) => setDiscountCode(e.target.value)}\n                 placeholder=\"Enter discount code\"\n-                className=\"mb-4 mt-1 block w-full rounded-sm border-gray-300\"\n+                className=\"mb-4 mt-1 block w-full rounded-sm border-gray-300 p-1\"\n               />\n               <button\n                 onClick={handleApplyDiscountCode}\n                 className=\"rounded bg-primary px-4 py-2 font-bold text-white hover:bg-primary-dark\"\n"
                },
                {
                    "date": 1717335712078,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -120,9 +120,9 @@\n                 className=\"mb-4 mt-1 block w-full rounded-sm border-gray-300 p-1\"\n               />\n               <button\n                 onClick={handleApplyDiscountCode}\n-                className=\"rounded bg-primary px-4 py-2 font-bold text-white hover:bg-primary-dark\"\n+                className=\"rounded bg-primary px-4 py-2 text-sm font-bold text-white hover:bg-primary-dark\"\n               >\n                 Apply Discount\n               </button>\n               {error && <p className=\"mt-4 text-red-500\">{error}</p>}\n"
                }
            ],
            "date": 1717234889741,
            "name": "Commit-0",
            "content": "import React, { useState } from \"react\";\n\nimport useCartStore from \"../../store/cartStore\";\nimport type { Discount } from \"../../utils/discount/discount.types\";\nimport calculateDiscount from \"../../utils/discountCalculator\";\n\ninterface CartSidePanelProps {\n  discountCodes: { [code: string]: Discount };\n}\n\nconst CartSidePanel: React.FC<CartSidePanelProps> = ({ discountCodes }) => {\n  const { cart, removeProduct, cartOpen, toggleCart, updateProductQuantity } =\n    useCartStore();\n  const cartItems = Array.from(cart.values());\n\n  const [discount, setDiscount] = useState<Discount | null>(null);\n  const [discountCode, setDiscountCode] = useState<string>(\"\");\n  const [error, setError] = useState<string | null>(null);\n\n  const handleApplyDiscountCode = () => {\n    const discount = discountCodes[discountCode.toUpperCase()];\n    if (discount) {\n      setDiscount(discount);\n      setError(null); // Clear any previous error messages\n    } else {\n      setError(\"Error applying discount: Invalid discount code\");\n    }\n  };\n\n  const { total, discountAmount, finalTotal } = discount\n    ? calculateDiscount(cartItems, discount)\n    : {\n        total: cartItems.reduce(\n          (sum, product) => sum + product.price * product.quantity,\n          0,\n        ),\n        discountAmount: 0,\n        finalTotal: cartItems.reduce(\n          (sum, product) => sum + product.price * product.quantity,\n          0,\n        ),\n      };\n\n  return (\n    <div\n      className={`fixed right-0 top-0 h-full w-80 transform bg-background shadow-lg transition-transform ${cartOpen ? \"translate-x-0\" : \"translate-x-full\"}`}\n    >\n      <div className=\"flex items-center justify-between border-b p-4\">\n        <h2 className=\"font-heading text-2xl font-bold text-primary\">\n          Shopping Cart\n        </h2>\n        <button onClick={toggleCart} className=\"text-2xl text-gray-700\">\n          &times;\n        </button>\n      </div>\n      <div className=\"p-4\">\n        {cartItems.length === 0 ? (\n          <p className=\"text-text\">Your cart is empty</p>\n        ) : (\n          <div>\n            {cartItems.map((product) => (\n              <div\n                key={product.id}\n                className=\"mb-4 flex items-center justify-between\"\n              >\n                <div>\n                  <h3 className=\"font-heading text-lg font-semibold text-primary\">\n                    {product.name}\n                  </h3>\n                  <p className=\"text-text\">\n                    ${product.price.toFixed(2)} x {product.quantity}\n                  </p>\n                  <div className=\"mt-2 flex items-center\">\n                    <button\n                      className=\"rounded-l bg-gray-300 px-2 py-1 font-bold text-gray-800 hover:bg-gray-400\"\n                      onClick={() =>\n                        updateProductQuantity(product.id, product.quantity - 1)\n                      }\n                    >\n                      -\n                    </button>\n                    <input\n                      type=\"number\"\n                      value={product.quantity}\n                      onChange={(e) =>\n                        updateProductQuantity(\n                          product.id,\n                          parseInt(e.target.value, 10),\n                        )\n                      }\n                      className=\"w-12 border-b border-t border-gray-300 text-center\"\n                    />\n                    <button\n                      className=\"rounded-r bg-gray-300 px-1 py-1 font-bold text-gray-800 hover:bg-gray-400\"\n                      onClick={() =>\n                        updateProductQuantity(product.id, product.quantity + 1)\n                      }\n                    >\n                      +\n                    </button>\n                  </div>\n                </div>\n                <button\n                  className=\"rounded bg-red-500 px-2 py-1 font-bold text-white hover:bg-red-700\"\n                  onClick={() => removeProduct(product)}\n                >\n                  Remove\n                </button>\n              </div>\n            ))}\n            <div className=\"mt-6 rounded-lg border bg-background p-4 shadow-lg\">\n              <h2 className=\"mb-4 font-heading text-2xl font-bold text-primary\">\n                Apply Discount Code\n              </h2>\n              <input\n                type=\"text\"\n                value={discountCode}\n                onChange={(e) => setDiscountCode(e.target.value)}\n                placeholder=\"Enter discount code\"\n                className=\"mb-4 mt-1 block w-full rounded-lg border-gray-300\"\n              />\n              <button\n                onClick={handleApplyDiscountCode}\n                className=\"rounded bg-primary px-4 py-2 font-bold text-white hover:bg-primary-dark\"\n              >\n                Apply Discount\n              </button>\n              {error && <p className=\"mt-4 text-red-500\">{error}</p>}\n            </div>\n            <div className=\"mt-4 border-t pt-4\">\n              <h3 className=\"font-heading text-lg font-semibold\">\n                Total: ${total.toFixed(2)}\n              </h3>\n              {discount && (\n                <h3 className=\"font-heading text-lg font-semibold\">\n                  Discount: ${discountAmount.toFixed(2)}\n                </h3>\n              )}\n              <h3 className=\"font-heading text-xl font-bold text-primary\">\n                Final Total: ${finalTotal.toFixed(2)}\n              </h3>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default CartSidePanel;\n"
        }
    ]
}